---
layout: post
title: create-react-app + Jest + Enzyme ã§æ›¸ãReactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆã®å§‹ã‚æ–¹
outline: Reactã®Componentã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯Jestã¨Enzymeã‚’çµ„ã¿åˆã‚ã›ã‚‹ã¨ã¨ã¦ã‚‚ã„ã„æ„Ÿã˜ã§ã—ãŸğŸ˜„ã¨ã„ã†ã‚ˆãã‚ã‚‹è©±ã¨ã€create-react-appã§ç”¨æ„ã—ãŸç’°å¢ƒã§ãã‚Œã‚‰ã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã¨ãƒãƒã‚‹ã“ã¨ãŒã‚ã‚‹ã‚ˆğŸ’€ã¨ã„ã†ã‚ã¾ã‚Šèã‹ãªã„è©±ã«ã¤ã„ã¦æ›¸ãã¾ã—ãŸã€‚
categories: [JavaScript, React]
---

### ãƒ—ãƒ­ãƒ­ãƒ¼ã‚°(èª­ã¿é£›ã°ã—ã¦ãã ã•ã„)

ä»Šã¯æ˜”ã€ã²ã¨ã¤ã®ãƒ¢ãƒ€ãƒ³ãªWebã‚¢ãƒ—ãƒªã€Œã‚Šã‚ãã¨å›ã€ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã—ãŸã€‚ãƒ¬ã‚¬ã‚·ãƒ¼ã•ã‚„äººä¾å­˜ã¨ã„ã£ãŸã‚¯ãƒ©ã‚·ã‚«ãƒ«ãªè¶£ã®ã‚ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’é–‹ç™ºãƒ»ä¿å®ˆã—ç¶šã‘ãŸäººã€…ãŒä¸€å¿µç™ºèµ·ã—ã¦ä½œã‚Šä¸Šã’ãŸè¿‘ä»£çš„ãªWebã‚¢ãƒ—ãƒªã€ãã‚ŒãŒã‚Šã‚ãã¨å›ã§ã—ãŸã€‚

ãƒ«ãƒ¼ãƒãƒ³ãƒ¯ãƒ¼ã‚¯ã‚’ã—ã¦ã„ãŸäººã€…ã®å¿ƒã«ã¯ã©ã™é»’ã„ã€Œé£½ãã€ã¨ã€Œã‚¹ãƒˆãƒ¬ã‚¹ã€ãŒæ¸¦å·»ã„ã¦ã„ã¾ã—ãŸã€‚ãã®è² ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å…¨è§£æ”¾ã—ã¦ã¤ãã‚‰ã‚ŒãŸã‚Šã‚ãã¨å›ã¯å¤§å¤‰è³¢ãã€æ–¬æ–°ã§ã€æ€¥æˆé•·ã‚’é‚ã’ã‚‹æœŸå¾…ã®æ˜Ÿã§ã—ãŸã€‚ä¸€ç¸·ã®æœ›ã¿ã‚’èƒŒè² ã£ãŸã‚Šã‚ãã¨å›ã§ã—ãŸãŒã€é–“ã‚‚ãªãã—ã¦æˆé•·ã¯ã¨ã¾ã‚Šã€ãƒã‚°ãŒå¢—ãˆã€ã‚½ãƒ¼ã‚¹ã®å„æ‰€ãŒçµ¡ã¾ã‚Šã€ã¿ã‚‹ã¿ã‚‹ã†ã¡ã«æ¥­ã«ã¾ã¿ã‚ŒãŸå­˜åœ¨ã¨ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚

ãã—ã¦ã€ã‚Šã‚ãã¨å›ã¯æœ½ã¡ã¾ã—ãŸã€‚

ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å„ã€…ã®ã‚ªãƒ¬ã‚ªãƒ¬å®Ÿè£…ã§ãƒ„ã‚®ãƒã‚®ã¾ã¿ã‚Œã«ãªã‚Šã‚¬ãƒã‚¬ãƒã«ä»•æ§˜ã§å›ºã‚ã‚‰ã‚Œã¦æœ½ã¡ã¦ã—ã¾ã£ãŸã‚Šã‚ãã¨å›â€¦â€¦ãã¿ã‚’è˜‡ç”Ÿã•ã›ã¦ã¿ã›ã‚‹ï¼ï¼
ãã†è¨€ã£ã¦ç«‹ã¡ä¸ŠãŒã£ãŸä¸€äººã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ç‰©èªãŒã€ä»Šã“ã“ã«ã¯ã˜ã¾ã‚ã†ã¨ã—ã¦ã„ã¾ã™ã€‚


### ã¾ãˆãŠã

* ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ãŸã„ã®ã§ã¾ãšã¯ãƒ†ã‚¹ãƒˆã‚’ç”¨æ„ã—ã‚ˆã†ã¨æ€ã„ã¾ã—ãŸ
* Facebookè¬¹è£½ã®**Jest**ã¨ã„ã†ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ãªãƒ„ãƒ¼ãƒ«ã§ãƒ†ã‚¹ãƒˆã‚’ã—ã¾ã™
* Airbnbè¬¹è£½ã®**Enzyme**ã¨ã„ã†Test Utilitiesã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¾ã™
* ã‚‚ã¨ã®Webã‚¢ãƒ—ãƒªã¯**create-react-app**ã§ã¤ãã‚‰ã‚Œã¦ã„ã¾ã™

create-react-app + Jest + Enzyme ã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¯ã˜ã‚ã‚ˆã†ã¨æ€ã£ãŸã¨ãã«ã—ãŸã“ã¨ã€ã¤ã¾ã¥ã„ãŸã“ã¨ã‚’æ›¸ãç•™ã‚ã¦ãŠãå›ã§ã™ã€‚

Jestã®å…¬å¼ã‚µã‚¤ãƒˆå†…ã«ã‚‚create-react-appã‚’ä½¿ã£ãŸè§£èª¬ãŒè¼‰ã£ã¦ã„ã‚‹ã®ã§ã€å…¬å¼æ´¾ã®äººã¯[ãã¡ã‚‰](https://facebook.github.io/jest/docs/tutorial-react.html)ã‚’ã©ã†ãã€‚

* TOC
{:toc}



### Environments

* React 15.4.2
* create-react-app 0.8.5
* Jest 17.0.2
* Enzyme 2.8.2

ã§ã®çµŒé¨“è«‡ã‚’å…ƒã«ã—ã¦ã„ã¾ã™ã€‚


### create-react-app ã®ãŠã•ã‚‰ã„

ã‚³ãƒãƒ³ãƒ‰ä¸€ç™ºã§Reactã®é–‹ç™ºç’°å¢ƒã‚’ã¤ãã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚  
(å‚è€ƒï¼š[Reactã‚’ç§’é€Ÿã§ä½¿ã„å§‹ã‚ã‚‰ã‚Œã‚‹create-react-appã®ä½¿ã„æ–¹ã¨ä½¿ã„å¿ƒåœ°](https://aloerina01.github.io/javascript/react/2017/02/28/1.html))

ã“ã‚Œã‚’ä½¿ã£ã¦æ§‹ç¯‰ã—ãŸç’°å¢ƒã«ã¯æ¨™æº–ã§JestãŒçµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã¦ã€`yarn test`ã‚³ãƒãƒ³ãƒ‰ã§ã™ãã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

> Create React App uses Jest as its test runner. To prepare for this integration, we did a major revamp of Jest so if you heard bad things about it years ago, give it another try.

*[create-react-app/README.md at master Â· facebookincubator/create-react-app Â· GitHub](https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#running-tests)ã‚ˆã‚Š*


### Jestã¨ã¯ã€Enzymeã¨ã¯

#### Jest

* [Jest Â· ğŸƒ Delightful JavaScript Testing](https://facebook.github.io/jest/)
* Reactã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™
* å˜ä½“ãƒ†ã‚¹ãƒˆã‚’æ›¸ããŸã‚ã®**functionç¾¤**ã¨ã€ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹**ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼**ãŒå«ã¾ã‚Œã¦ã„ã¾ã™(ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³)




#### Enzyme

* [Enzyme](http://airbnb.io/enzyme/)
* Reactã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããŸã‚ã®Utilityã§ã™
* Jestã ã‘ã§ã¯ã§ããªã„é«˜åº¦ãªãƒ†ã‚¹ãƒˆã‚’æ›¸ãã“ã¨ãŒã§ãã‚‹functionç¾¤ã§ã™(Jestã¨é‡ãªã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚Šã¾ã™)
* Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’renderingã™ã‚‹`shallow` `mount` `render`ã®3ã¤ã®functionãŒã‚­ãƒ¢ã§ã™


### ãƒ†ã‚¹ãƒˆã®æ›¸ãå§‹ã‚æ–¹

#### 1. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®å ´æ‰€ã‚’çŸ¥ã‚‹
Jestã¯ä»»æ„ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ¢ã—å‡ºã—é †ã«å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™ã€‚æœ¬æ¥ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯`package.json`ã«`rootDir`ã¨ã„ã†åå‰ã§å®šç¾©ã™ã‚‹ã‚‚ã®ãªã®ã§ã™ãŒã€create-react-appã§ã¤ãã‚‰ã‚ŒãŸç’°å¢ƒã§ã¯`src/`ã¨æ±ºã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

```js
// react-scripts/utils/createJestConfig.js
module.exports = (resolve, rootDir, isEjecting) => {
  // (çœç•¥)
  if (rootDir) {
    config.rootDir = rootDir;  // â† ã“ã“ã§å¼•æ•°ã‚’ã‚‚ã¨ã«rootDirã‚’æŒ‡å®šã—ã¦ã„ã‚‹
  }
  return config;
};

// react-scripts/scripts/test.js
argv.push('--config', JSON.stringify(createJestConfig(
  relativePath => path.resolve(__dirname, '..', relativePath),
  path.resolve(paths.appSrc, '..'), // â† ã“ã“ã§å¼•æ•°rootDirã‚’æŒ‡å®šã—ã¦ã„ã‚‹
  false
)));

```

ã—ãŸãŒã£ã¦ã€`src/`ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã—ã¦ã„ãã¾ã™ã€‚

#### 2. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹

Jestã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’èªè­˜ã•ã›ã‚‹ã«ã¯2ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

1. `__test__`ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã
2. `.test.js`ã¨ã„ã†æ‹¡å¼µå­ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹

ç§ã¯â‘¡ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚

```
src
  â”œ actions
  â”œ components
  ï¸™    â”œ CheckboxWithLabel.js  (Buttonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)
        â”” test
            â”” CheckboxWithLabel.test.js  (Buttonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ)
```


#### 3. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã

Jestã®å„functionã®ä½¿ã„æ–¹ã¯ã“ã®è¨˜äº‹ãŒåˆ†ã‹ã‚Šã‚„ã™ã‹ã£ãŸã§ã™ã€‚ Â 
[Facebookè£½ã®JavaScriptãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã€ŒJestã€ã®é€†å¼•ãä½¿ç”¨ä¾‹ - Qiita](http://qiita.com/chimame/items/e97883fd46b67529d59f)

ã“ã“ã§ã¯ã€ã€Œãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®On/Offã«å¿œã˜ã¦ãƒ©ãƒ™ãƒ«ã®æ–‡è¨€ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ã®ãƒ†ã‚¹ãƒˆã®å®Ÿè£…ä¾‹ã‚’æŒ™ã’ã¾ã™ã€‚ã‚½ãƒ¼ã‚¹ã‚’èª­ã‚“ã§é›°å›²æ°—ãŒã¤ã‹ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™(ãŒã„ã‹ãŒã§ã—ã‚‡ã†)ã€‚

**src/components/CheckboxWithLabel.js**
```js
import React, { Component } from 'react';

export default class CheckboxWithLabel extends Component {

  constructor(props) {
    super(props);
    this.state = {isChecked: false};
    this.onChange = this.onChange.bind(this);
  }

  onChange() {
    this.setState({isChecked: !this.state.isChecked});
  }

  render() {
    return (
      <label>
        <input type="checkbox" checked={this.state.isChecked} onChange={this.onChange} />
        {this.state.isChecked ? this.props.labelOn : this.props.labelOff}
      </label>
    );
  }
}
```

**src/components/test/CheckboxWithLabel.test.js**
```js
import React from 'react';
import { shallow, mount } from 'enzyme';
import CheckboxWithLabel from '../CheckboxWithLabel';

describe('ChecboxWithLabel', () => {
  test('Changes the label after click', () => {
 Â  Â // Componentã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹
    const checkbox = shallow(<CheckboxWithLabel labelOn="On" labelOff="Off" />);
    // expect(æ¤œæŸ»å¯¾è±¡).toEqual(æƒ³å®šçµæœ)
    expect(checkbox.text()).toEqual('Off');
 Â  Â // shallowã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸè¦ç´ ã‹ã‚‰ç‰¹å®šã®ã‚»ãƒ¬ã‚¯ã‚¿ã‚’å–å¾—ã™ã‚‹
    checkbox.find('input').simulate('change');
    // expect(æ¤œæŸ»å¯¾è±¡).toEqual(æƒ³å®šçµæœ)
    expect(checkbox.text()).toEqual('On');
  });
});
```

ã“ã“ã§ã¤ã‹ã£ãŸ`shallow`ã¨ã„ã†é–¢æ•°ã¯ã€ãã®åã®é€šã‚ŠComponentã‚’æµ…ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚Componentã®ä¸­ã«ComponentãŒã‚ã‚‹å…¥ã‚Œå­æ§‹é€ ã®å ´åˆã€ä¸€ç•ªå¤–å´ã®Componentã—ã‹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã›ã‚“ã€‚å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ä¾å­˜ã—ã¦ã„ãªã„çµæœã‚’æ¤œæŸ»ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

> Shallow rendering is useful to constrain yourself to testing a component as a unit, and to ensure that your tests aren't indirectly asserting on behavior of child components.

*[Shallow Rendering](http://airbnb.io/enzyme/docs/api/shallow.html)ã‚ˆã‚Š*


### Enzymeã‚’ä½¿ã£ã¦ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹

ã“ã“ã‹ã‚‰ã¯Jest + Enzymeã®è©±ã§ã™ã€‚  
ã“ã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€**Componentã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çµæœã‚’ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ã—ã¦æ®‹ã—ã¦ãŠãã€ãã‚Œã¨æ¯”è¼ƒã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çµæœã«å·®ç•°ãŒãªã„ã‹**ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä¸Šè¨˜ã®CheckboxWithLabelã§ãã®ä¾‹ã‚’æ›¸ã„ã¦ã¿ã¾ã™ã€‚
```js
describe('CheckboxWithLabel', () => {
  test('Matches with the snapshot when checkbox is OFF', () => {
    const dom = mount(<CheckboxWithLabel labelOn="On" labelOff="Off" />);
    expect(dom).toMatchSnapshot();
  });
});
```

`toMatchSnapshot()`ã¯ã€æ—¢å­˜ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨æ¯”è¼ƒã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çµæœãŒä¸€è‡´ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤å®šã—ã¾ã™ã€‚æœ€åˆã®ä¸€å›ç›®ã¯snapshotãŒãªã„ãŸã‚å¿…ãšpassã—ã¾ã™ã€‚snapshotã‚’æ›´æ–°ã™ã‚‹å ´åˆã¯`jest --update`ã¾ãŸã¯`jest -u`ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãã¾ã™ã€‚

ã“ã“ã§ä½¿ã£ãŸ`mount`ã¨ã„ã†é–¢æ•°ã¯ã€Componentã‚’å®Œå…¨ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚ãã®åˆ†ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œé€Ÿåº¦ãŒé…ããªã‚‹ãŸã‚ã€å…¥ã‚Œå­ã®æ·±ã„Componentã‚’mountã—ãŸã‚Šã€mountã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆã‚’ãŸãã•ã‚“æ›¸ãã¨ãªã‹ãªã‹ãƒ†ã‚¹ãƒˆãŒçµ‚ã‚ã‚Šã¾ã›ã‚“ã€‚
ãã®å ´åˆã¯ãƒ†ã‚¹ãƒˆã‚’åˆ†å‰²ã—ã¦è¡Œã†ãªã©ã®å·¥å¤«ãŒå¿…è¦ã§ã—ãŸã€‚

> Full DOM rendering is ideal for use cases where you have components that may interact with DOM APIs, or may require the full lifecycle in order to fully test the component (i.e., componentDidMount etc.)

*[Full DOM Rendering](http://airbnb.io/enzyme/docs/api/mount.html)ã‚ˆã‚Š*

### ãƒãƒã£ãŸã¨ã“ã‚

#### ğŸ™…localStorage is not defined

ãƒ†ã‚¹ãƒˆã™ã‚‹ComponentãŒä¾å­˜ã—ã¦ã„ã‚‹ã‚ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€å†…éƒ¨ã§localStorageã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚ãã®ãŸã‚importæ™‚ã«`localStorage is not defined`ã®ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¾ã—ãŸã€‚

Jestã¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€ãã‚Œã‚’åˆ©ç”¨ã—ã¦localStorageãƒ¢ãƒƒã‚¯ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§å¯¾å‡¦ã§ãã¾ã™ã€‚ä¸€èˆ¬çš„ã«ã¯ã€`package.json`ã«`setupFiles`ã¾ãŸã¯`setupTestFrameworkScriptFile`ã¨ã—ã¦å®šç¾©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ†ã‚¹ãƒˆå‰ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚  
(å‚è€ƒï¼š [Configuring package.json Â· Jest](http://facebook.github.io/jest/docs/configuration.html#setupfiles-array))
```package.json
"jest": {
  "setupFiles": ["createLocalStorageMock.js"]
}
```  


ãŸã ã—ã€create-react-appã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ã‚„ã¯ã‚Šã“ã®è¨­å®šãŒåŠ¹ã‹ãšã€ç‹¬è‡ªã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«`src/setupTests.js`ã«ãƒ¢ãƒƒã‚¯ã‚’æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

**src/setupTests.js**
```js
const localStorageMock = (() => {
  var storage = {};
  return {
    setItem: (key, value) => {
      storage[key] = value || '';
    },
    getItem: (key) => {
      return storage[key] || null;
    },
    removeItem: (key) => {
      delete storage[key];
    },
    get length() {
      return Object.keys(storage).length;
    },
    key: (i) => {
      var keys = Object.keys(storage);
      return keys[i] || null;
    }
  };
})();
Object.defineProperty(global, 'localStorage', { value: localStorageMock });
```


#### ğŸ™…ReactTestUtils has been moved to react-dom/test-utils.

ãƒ†ã‚¹ãƒˆçµæœã«ä»¥ä¸‹ã®ãƒ¯ãƒ¼ãƒ‹ãƒ³ã‚°æ–‡ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã—ãŸã€‚
```shell
Warning: ReactTestUtils has been moved to react-dom/test-utils. Update references to remove this warning.
```

ReactTestUtilsã®ä¾å­˜å…ƒãŒå¤‰ã‚ã£ãŸã£ã¦ã“ã¨ã ã¨æ€ã„Reactå…¬å¼ã‚’èª¿ã¹ãŸã¨ã“ã‚ã€ä»¥ä¸‹ã®å¯¾å¿œã‚’ã™ã‚‹ã‚ˆã†ã«è¨˜è¼‰ãŒã‚ã‚Šã¾ã—ãŸã€‚

```js
import ReactTestUtils from 'react-dom/test-utils'; // ES6
var ReactTestUtils = require('react-dom/test-utils'); // ES5 with npm
```

è¨€ã‚ã‚Œã‚‹ãŒã¾ã¾ã«ãŸã‚ã—ãŸã‚‚ã®ã®ã€`Cannot find module 'react-dom/test-utilsâ€™`ã¨æ€’ã‚‰ã‚Œã‚‹ã€‚ã„ã‹ãŒãªã‚‚ã®ã§ã™ã‹ã­ã€‚

ã¨ã„ã†ã“ã¨ã§ã€ä»Šåº¦ã¯ãƒ¯ãƒ¼ãƒ‹ãƒ³ã‚°æ–‡ã®`Update references`ã«ãƒã‚«æ­£ç›´ã«å¾“ã„ä¾å­˜ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä¸¸ã€…ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ã¿ã¾ã—ãŸã€‚
```shell
$ yarn cache clean
$ yarn upgrade
```

è§£æ±ºã—ã¡ã‚ƒã„ã¾ã—ãŸã€‚



### ãŠã‚ã‚Šã«

ãƒªãƒ•ã‚¡ã‚¯ã‚¿ã—ã¦ã¾ã‚‹ã£ã¨æ›¸ãç›´ã—ãŸã„éƒ¨åˆ†ãŒã‚ã£ãŸã®ã§ã™ãŒã€ãƒ‡ã‚°ãƒ¬ã—ãªã„ä¿è¨¼ã‚’ã¨ã‚‹æ‰‹æ®µãŒãªã•ãã†ã ã£ãŸã®ã§ã²ã¨ã¾ãšãƒ†ã‚¹ãƒˆã‚’ç”¨æ„ã—ã‚ˆã†ï¼ã€€ã¨ã„ã†ã“ã¨ã§æ›¸ãå§‹ã‚ãŸãƒ†ã‚¹ãƒˆã§ã™ãŒ(é…ã„)ã€æ€ã£ãŸä»¥ä¸Šã«èé€šãŒåŠ¹ãã—æ›¸ãå¿ƒåœ°ãŒè‰¯ãã¦å……å®Ÿã—ãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã¨ãªã‚Šã¾ã—ãŸã€‚ã¨ãã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çµæœã‚’snapshotã§æ¯”è¼ƒã§ãã‚‹ã®ã¯é‡å®ã—ãã†ãªæ„Ÿã˜ã§ã™ã€‚

ãã‚“ãªæ„Ÿã˜ã§Jestã¨Enzymeã¯ã‚ˆã‹ã£ãŸã‚‚ã®ã®ã€create-react-appã¯ä¾¿åˆ©ãªåé¢åˆ¶ç´„ãŒå¤šããƒãƒã‚Šã©ã“ã‚ãŒå¤šã€…ã‚ã‚‹ã®ã§ã€ãƒãƒã£ãŸã¨ãã¯ã“ã†ã—ã¦è¨˜éŒ²ã‚’æ®‹ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚

ãã‚Œã§ã¯ã€‚
