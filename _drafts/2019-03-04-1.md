---
title: モブプロを始めたら最高だったので魅力や始め方をまとめみた
outline:
categories: ['Management', 'MobProgramming']
---

最近モブプロを始めました。楽しみながら開発でき、しかも開発フローにまつわる悩みが解消されてとても良い感じでした。ので、なぜモブプロが良いのか・どうやって始めたらよいのかを備忘を兼ねてモブプロ初心者の私の目線でまとめてみます。モブプロの魅力を分かり合えるモブプロ仲間が一人でも増えれば幸いです。

TOC

### 参考書
[モブプログラミング・ベストプラクティス](https://www.amazon.co.jp/dp/4822289648)といくつかのネット記事、スライドをよく参照しています。今回の内容はこの本の内容まとめと感想がメインになります。

### モブまたはモブプログラミングとは？
本の中の言葉を借りるなら「チームで一緒に働く」ことがモブです。チームで一緒にひとつの開発をすれば、それはモブプログラミングです。

### なぜモブプロをするの？
モブプロの良さは**フロー効率の良さ**にあります。なので一緒にモブプロをしてもらうメンバーやモブプロすることを許可してくれる上司などには、フロー効率とは何なのかを理解してもらい、フロー効率を良くしていこうという共通認識を持つと良さそうです。

#### フロー効率とは
https://www.slideshare.net/i2key/xpjug
このスライドが特にわかりやすい。以下はスライド内容のメモ。

リソース効率とは「リソースの空きがいかに少ないか」です。チームメンバー全員が休みなく働いている状態、つまり稼働率100％の状態だと、リソース効率が良いといえます。

フロー効率とは「リリースまでリードタイムがいかに短いか」です。短い期間でリリースを繰り返せている状態だと、フロー効率が良いといえます。

リソース効率を追求した考え方では「How Many(どれくらい多くの機能を詰め込めるか)」と考える事が多く、フロー効率を追求した考え方では「How Little(どれくらい細かく刻めるか)」と考えることが多い。後者は変化に強い。

#### フロー効率を良くしていくためのモブとは
フロー効率とは「高速道路が常に流れる状態を保つこと」と本の中で表現されている。そうすることでリリースまでのリードタイムが短くなる。モブの考え方は基本的にフロー効率重視である。それがわかる側面として

* 全員で課題に取り組むのでスペシャリストは生まれず、ゼネラリストが生まれる。結果的にキーパーソンへの依存度が下がり、一人が欠けたときの影響が下が少ない。
* 全員で課題に取り組むので人のスキルや考え方や知見を盗む機会が多く、スキルアップが早い。結果的に全員がゼネラリストになれる。
* 集団で取り組むことで判断がより良くなり、品質の大きな欠陥が減る。優秀な一人より3人の集団のほうが良い決断ができることが科学的に検証済みとのこと。

といったことが挙げられる。

フロー効率とは、長期で継続して保守・提供していくプロダクト開発において重要な考え方で、それを良くしていくGood Practiceのひとつがモブプロということ。


### モブプロの成果の測り方
やってはいけないのはチームの短期間のベロシティで成果を測ること。先程の高速道路の例で言えば、「高速入口から最初の出口まではガンガン流れていて交通量すごく多い」というのが短期間のベロシティに当たると思う。
短期間で見れば効率はいいけれど、2番目の出口の手前で工事をしていて1車線減っていたりしたときにそこで一気に渋滞すると、継続的な視点では交通量が下がる。開発も同じで、途中で仕様変更することもあれば、体調不良でメンバーが欠けることもある。なので短期間のベロシティではフロー効率は測れない。つまりモブプロの成果は測れない。

ではどう測るかというと、実はこれは難しくて一目瞭然な指標はない。なのでいくつか影響のある指標をとりあげて総合的に判断することになる。指標の例は以下。

* マージコンフリクトの解消にかかる時間
* 本番システムに入り込むバグの量
* 経験の浅いメンバーの学習度
* レビュー時間、レビューの待ち時間



### モブプロの準備
モブプロを始めるには準備が必要。なんせ複数人が同時に、そして快適に仕事する必要があるのだから、それなりの準備をしておかないとね。

* 参加者が窮屈に感じず、平等にモニターが見える空間、会議室
* モブの進行や決めごと、TODOなどを書き出せるホワイトボード
* モブ用マシン(個人のマシンを交代で使うと交代の手間がロスになるので、あったほうが良い)
* 参加者全員にとって馴染みのあるエディタ
* モブタイマー(できればサブディスプレイなどを用意して常に見えるところに表示しておく)
  * Agility の Mobbing & Retrospective Timer
  * Pluralsight の Mob Timer 等
* 本には書いてなかったけど、おやつ


### モブプロの登場人物
* タイピスト(ドライバー)
  * キーボードを触る唯一の人
  * 10分などのサイクルで交代し、全員がタイピストになるように回す
  * その他のモブがしてくれと頼んだことを**理解する**
  * 指示が理解できないときはわかるまで**質問する**
  * 頼まれたことをコードとして**実装する**
  * その他のモブを信頼し、自分ではしないような実装も**躊躇せず試す**
* その他のモブ(ナビゲーター)
  * キーボードを触らない人。2〜5人くらいがおすすめ
  * 問題解決につながる次の論理的ステップを見つけるために力になる
  * 理解できるまで**質問する**
  * モブ全体の理解の水準を上げるために**貢献する**
  * 眼の前の問題に**集中する**
  * 他のメンバーの意見に**傾聴する**
  * システムの中に改善すべき部分を**探す**

### モブプロの進行
トライアルに向いている2時間半のモブプロの例。

1. 準備(30分)
  * モブプロの意義の説明
  * モブプロの役割分担の説明
  * モブで解決する問題の概要の説明
  * タイピストの順番決め(ランダムでも可)
  * おやつの配布
2. モビングインターバル(1.5時間程度)
  * 10分ずつなどでタイピストを交代していく
  * 途中で休憩をはさんでもOK
3. ふりかえり(20分)
  * 事実をもとに成果を振り返る
  * 肯定的意見、否定的意見を集める
  * 軌道修正するべきことを決める(次回移行試す)
  * 必要に応じて、今後も継続していくか決める(どちらでも可なら継続)

### モブプロの心がけ
* 自分がしないような他のメンバーのアプローチを受け入れる。それをコードにし検証することにも意義がある
* 対立的にならない。モブは「わたしたち」で行うもの。主語は「わたし」や「あなた」ではなく、常に「わたしたち」
* 人ではなくコードを批判する。負債に対しても、それを実装した人ではなく実装せざるを得ない状況と向き合う

### 「その他のモブ」のアンチパターン
まだコードで表現されていないことを議論すること。同様に、タイピストがまだコードで表現されていないことについて質問することもアンチパターン。
コードで表現されていない状態では「検証」ができないのと、その他のモブ全員が同水準で状況理解できない。なのでまずタイピストへコードで表現することを依頼し、それを見ながら議論する。そうすることで議論が理論的なものから実践的なものに変わっていく。

もしコードで表現したいアイデアが複数出てしまい、タイピストにどれを依頼するか迷ったときは、一番単純なもの(はやく検証できるもの)を採用する。そうすることで「コードを見ながら議論する」というモブプロの土俵に上がれる。

### 「タイピスト」のアンチパターン
こっそり自分のコードを書き込むこと。または勝手に自分の意志で進めること。
キーボードを触れる人は、誰よりも自由に自分の考えを**暗黙的に**コードに反映できる。それをやってしまうと、上のアンチパターン同様に、その他のモブ全員が同水準で状況理解できなくなる。

もしタイピストがアイデアを持っている場合は、自分がその他のモブの番になるのを待つorその場でタイピストを交代する等し、モブに回ってからアイデアを出すようにする。


### エキスパートがいる場合
よくある間違った構図

* エキスパートがタイピストになって進め、モブはそれを見て学ぶ
* 一人のエキスパートモブがほとんどの発言を占め、エキスパートモブとタイピストのペアプロ状態になる

これらはモブプロがうまく機能しなくなることが多い。

対策として、エキスパートがいる場合は「タイピストの役割をしない」ようお願いし、モブプロの作業フローや議論の軌道修正を買ってもらうと良い。言い換えると、モブプロコーチの役割を担ってもらう。
メンバーの知識の穴を埋めたり、モブプロの進行が滞ったときに客観的な視点でガイドしたり、といったことをしてもらうと良い。

### 手探りで進めていく案件の場合
誰しも試したことがなく、どこから手を付けてよいかわからない状況になり得る課題に取り組む場合、「個々で調べる時間」「個々で考える時間」が必要なケースがある。その場合は**時間を区切ってモブを中断しその場で各々が作業**しても良い。本の中では「タイムボックス付きの探究」と呼んでいる。
定めた時間が経過したら成果を共有しあい、モブプロを再開する。


### ハッピーモビング
この本にはモブプロの初心者・中級者が従うべきプロセスがまとめてある、とのこと。プロセスに従ったほうがスムーズに進むケースが多いと思われるが、ルールを守ることが絶対ではない、とも書かれている。モブプロの最後に行う振り返りを通じてモブプロを改善していくのは良いことのはず。モブプロは極論を言えば「みんなで一緒に仕事する」だけのことなのだから。

